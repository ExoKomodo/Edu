import{d as h,_ as k,r as S,o as t,c as g,w,a as r,u as A,b as I,e as L,A as a,f as i,g as u,F as v,h as $,j as T,k as x,l as C,m as b}from"./index-3492b608.js";import{_ as B}from"./SectionEditor.vue_vue_type_script_setup_true_lang-c5aa75bd.js";import{S as p}from"./SectionService-15405545.js";import{S as M}from"./Spinner-3a9e1c20.js";const N=h({name:"SectionLink",props:{name:{type:String,required:!0},description:{type:String,required:!0},id:{type:String,required:!0},courseId:{type:String,required:!0}}});const q=["innerHTML"],H=["innerHTML"];function V(s,o,n,d,c,_){const l=S("RouterLink");return t(),g(l,{to:`/course/${s.courseId}/section/${s.id}`,class:"hover:bg-midnightGreen flex flex-col transition duration-250"},{default:w(()=>[r("p",{class:"text-2xl",innerHTML:s.name},null,8,q),r("p",{class:"text-gray-400",innerHTML:s.description},null,8,H)]),_:1},8,["to"])}const D=k(N,[["render",V],["__scopeId","data-v-0206ac72"]]),j={class:"sectionBackground min-h-screen"},F={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5 my-5"},R=r("h1",{class:"p-2 bg-mysticStone text-white rounded flex justify-center text-3xl font-bold my-3"},"Sections",-1),E={key:0,class:"flex place-content-center"},G={key:1},P=h({__name:"SectionView",props:{courseId:{}},setup(s){const o=T(),n=A(),d=s,c=I({isLoading:!0,sectionIndex:{}});async function _(e){const m={id:e.id,content:e.content,difficulty:Number.parseInt(e.difficulty),metadata:{name:e.name,description:e.description,courseId:d.courseId}};await p.createAsync(m,{toast:n,token:await a.getAccessTokenAsync(o,{toast:n})}),window.location.reload()}async function l(e){await p.deleteAsync(e,{toast:n,token:await a.getAccessTokenAsync(o,{toast:n})}),window.location.reload()}return L(async()=>{try{c.sectionIndex=await p.getAllAsync({toast:n,token:await a.getAccessTokenAsync(o,{toast:n})})}finally{c.isLoading=!1}}),(e,m)=>(t(),i("div",j,[r("div",F,[R,c.isLoading?(t(),i("div",E,[u(M)])):(t(),i("div",G,[(t(!0),i(v,null,$(c.sectionIndex,([y,f])=>(t(),i("span",null,[u(D,{class:"p-2 bg-mysticStone text-white rounded flex pl-5 my-3",id:y,courseId:d.courseId,name:f.name,description:f.description},null,8,["id","courseId","name","description"]),x(a).isAdmin(x(o))?(t(),g(b,{key:0,handler:async()=>await l(y),text:"Delete?",class:"w-20"},null,8,["handler"])):C("",!0)]))),256)),u(B,{handler:_,handlerText:"Create",sectionId:"",sectionContent:"",sectionDifficulty:1,sectionDescription:"",sectionName:""})]))])]))}});export{P as default};
