import{d as g,_ as w,r as C,o as n,c as k,w as A,a as i,t as x,u as v,b as S,e as $,A as c,f as a,g as d,F as b,h as L,i as T,j as h,k as I,l as B}from"./index-09a06164.js";import{C as u,_ as N}from"./CourseEditor.vue_vue_type_script_setup_true_lang-46b922f7.js";import{S as V}from"./Spinner-55aad769.js";import"./BlobService-b7e752f6.js";const q=g({name:"CourseLink",props:{name:{type:String,required:!0},description:{type:String,required:!0},id:{type:String,required:!0}}});const D={class:"text-2xl"},j={class:"text-gray-400"};function F(r,s,t,o,l,_){const p=C("RouterLink");return n(),k(p,{to:`/course/${r.id}`,class:"hover:bg-midnightGreen flex flex-col transition duration-250"},{default:A(()=>[i("p",D,x(r.name),1),i("p",j,x(r.description)+"...",1)]),_:1},8,["to"])}const M=w(q,[["render",F],["__scopeId","data-v-aa365bb1"]]),R={class:"courseBackground min-h-screen"},E={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5 my-5"},G=i("h1",{class:"p-2 bg-mysticStone text-white rounded flex justify-center text-3xl font-bold my-3"},"courses",-1),z={key:0,class:"flex place-content-center"},H={key:1},U=g({__name:"CourseView",setup(r){const s=T(),t=v(),o=S({isLoading:!0,courseIndex:{}});async function l(e){const m={id:e.id,content:e.content,metadata:{name:e.name,description:e.description}};await u.createAsync(m,{toast:t,token:await c.getAccessTokenAsync(s,{toast:t})}),window.location.reload()}async function _(e){await u.deleteAsync(e,{toast:t,token:await c.getAccessTokenAsync(s,{toast:t})}),window.location.reload()}function p(e){return e}function J(e){return e}return $(async()=>{try{o.courseIndex=await u.getAllAsync({toast:t,token:await c.getAccessTokenAsync(s,{toast:t})})}finally{o.isLoading=!1}}),(e,m)=>(n(),a("div",R,[i("div",E,[G,o.isLoading?(n(),a("div",z,[d(V)])):(n(),a("div",H,[(n(!0),a(b,null,L(o.courseIndex,(y,f)=>(n(),a("span",null,[d(M,{class:"p-2 bg-mysticStone text-white rounded flex pl-5 my-3",id:f,name:y.name,description:y.description},null,8,["id","name","description"]),h(c).isAdmin(h(s))?(n(),k(B,{key:0,handler:async()=>await _(f),text:"Delete?",class:"w-20"},null,8,["handler"])):I("",!0)]))),256)),d(N,{handler:l,handlerText:"Create",courseId:"",courseContent:"",courseDescription:"",courseName:""})]))])]))}});export{U as default};
