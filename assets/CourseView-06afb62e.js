import{d as x,_ as g,r as k,o as t,c as h,w,a as i,u as A,b as C,e as L,A as c,f as a,g as l,F as v,h as T,j as $,k as f,l as S,m as b}from"./index-3492b608.js";import{C as u,_ as B}from"./CourseEditor.vue_vue_type_script_setup_true_lang-4b7616d4.js";import{S as I}from"./Spinner-3a9e1c20.js";import"./BlobService-93622bdb.js";const M=x({name:"CourseLink",props:{name:{type:String,required:!0},description:{type:String,required:!0},id:{type:String,required:!0}}});const H=["innerHTML"],N=["innerHTML"];function V(r,s,n,o,_,p){const e=k("RouterLink");return t(),h(e,{to:`/course/${r.id}`,class:"hover:bg-midnightGreen flex flex-col transition duration-250"},{default:w(()=>[i("p",{class:"text-2xl",innerHTML:r.name},null,8,H),i("p",{class:"text-gray-400",innerHTML:r.description},null,8,N)]),_:1},8,["to"])}const q=g(M,[["render",V],["__scopeId","data-v-c01ea960"]]),j={class:"courseBackground min-h-screen"},D={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5 my-5"},F=i("h1",{class:"p-2 bg-mysticStone text-white rounded flex justify-center text-3xl font-bold my-3"},"courses",-1),R={key:0,class:"flex place-content-center"},E={key:1},O=x({__name:"CourseView",setup(r){const s=$(),n=A(),o=C({isLoading:!0,courseIndex:{}});async function _(e){e.metadata={name:e.name,description:e.description};const d={id:e.id,content:e.content,metadata:e.metadata};console.log(d),await u.createAsync(d,{toast:n,token:await c.getAccessTokenAsync(s,{toast:n})}),window.location.reload()}async function p(e){await u.deleteAsync(e,{toast:n,token:await c.getAccessTokenAsync(s,{toast:n})}),window.location.reload()}return L(async()=>{try{o.courseIndex=await u.getAllAsync({toast:n,token:await c.getAccessTokenAsync(s,{toast:n})})}finally{o.isLoading=!1}}),(e,d)=>(t(),a("div",j,[i("div",D,[F,o.isLoading?(t(),a("div",R,[l(I)])):(t(),a("div",E,[(t(!0),a(v,null,T(o.courseIndex,([m,y])=>(t(),a("span",null,[l(q,{class:"p-2 bg-mysticStone text-white rounded flex pl-5 my-3",id:m,name:y.name,description:y.description},null,8,["id","name","description"]),f(c).isAdmin(f(s))?(t(),h(b,{key:0,handler:async()=>await p(m),text:"Delete?",class:"w-20"},null,8,["handler"])):S("",!0)]))),256)),l(B,{handler:_,handlerText:"Create",courseId:"",courseContent:"",courseDescription:"",courseName:""})]))])]))}});export{O as default};
