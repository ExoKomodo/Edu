import{d as v,_ as E,r as U,o as n,c as g,w as B,a as s,i as C,u as $,b as S,j,A as u,k as c,f as d,l as x,v as M,t as A,g as k,m as T,n as b,F as L,h as V,p as q,q as _,C as D,e as H}from"./index-bb143292.js";import{M as I,C as f}from"./CourseService-4bbb34fd.js";import{S as P}from"./Spinner-3ca749ba.js";import"./SectionService-c2dfd566.js";import"./AssignmentService-e59bc306.js";import"./BlogService-4efc6870.js";const F=v({name:"CourseLink",props:{name:{type:String,required:!0},description:{type:String,required:!0},id:{type:String,required:!0}}});const N=["innerHTML"],z=["innerHTML"];function R(p,i,a,r,h,y){const t=U("RouterLink");return n(),g(t,{to:`/course/${p.id}`,class:"hover:bg-midnightGreen flex flex-col transition duration-250"},{default:B(()=>[s("p",{class:"text-2xl",innerHTML:p.name},null,8,N),s("p",{class:"text-gray-400",innerHTML:p.description},null,8,z)]),_:1},8,["to"])}const G=E(F,[["render",R],["__scopeId","data-v-f3d498d7"]]),J={key:0,class:"bg-mysticStone text-white border-slate-400 border-2 rounded p-1 pl-2 my-2"},O=s("div",{class:"text-2xl"},"Model Editor",-1),Q={for:"edit-mode"},W=s("label",{for:"show-preview"}," Show preview?",-1),X={key:0},Y={class:"capitalize text-white border-white border-2 rounded p-1 pl-2 my-2 mr-12"},Z=["onUpdate:modelValue","type"],K=v({__name:"ModelEditor",props:{handler:{type:Function},handlerText:{},modelKind:{}},async setup(p){let i,a;const r=C(),h=$(),y=p,t=I.inject(y.modelKind),e=S({isEditMode:!1,showPreview:!1,viewModel:t.make()});return[i,a]=j(()=>u.getAccessTokenAsync(r,{toast:h})),i=await i,a(),(m,l)=>c(u).isAdmin(c(r))?(n(),d("div",J,[O,x(s("input",{type:"checkbox",id:"edit-mode",name:"editMode","onUpdate:modelValue":l[0]||(l[0]=o=>e.isEditMode=o)},null,512),[[M,e.isEditMode]]),s("label",Q,A(m.handlerText)+" mode?",1),s("span",{class:b(["inline-block",{invisible:!e.isEditMode}])},[k(T,{handler:()=>m.handler(e.viewModel),text:m.handlerText},null,8,["handler","text"])],2),s("div",{class:b({invisible:!e.isEditMode})},[x(s("input",{type:"checkbox",id:"show-preview",name:"showPreview","onUpdate:modelValue":l[1]||(l[1]=o=>e.showPreview=o)},null,512),[[M,e.showPreview]]),W],2),c(u).isAdmin(c(r))&&e.isEditMode?(n(),d("div",X,[(n(!0),d(L,null,V(c(t).objectViewKeys,o=>(n(),d("div",null,[s("div",Y,A(o.key),1),o.kind!=="code"?x((n(),d("input",{key:0,"onUpdate:modelValue":w=>e.viewModel[o.key]=w,type:o.kind},null,8,Z)),[[q,e.viewModel[o.key]]]):_("",!0),o.kind==="code"?(n(),g(D,{key:1,modelValue:e.viewModel[o.key],"onUpdate:modelValue":w=>e.viewModel[o.key]=w,height:o.height??2},null,8,["modelValue","onUpdate:modelValue","height"])):_("",!0)]))),256))])):_("",!0)])):_("",!0)}}),ee={class:"courseBackground min-h-screen"},te={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5 my-5"},oe=s("h1",{class:"p-2 bg-mysticStone text-white rounded flex justify-center text-3xl font-bold my-3"},"courses",-1),ne={key:0,class:"flex place-content-center"},se={key:1},ue=v({__name:"CourseView",setup(p){const i=C(),a=$(),r=S({isLoading:!0,courseIndex:{}});async function h(t){t.metadata={name:t.name,description:t.description};const e={id:t.id,content:t.content,metadata:t.metadata};console.log(e),await f.createAsync(e,{toast:a,token:await u.getAccessTokenAsync(i,{toast:a})}),window.location.reload()}async function y(t){await f.deleteAsync(t,{toast:a,token:await u.getAccessTokenAsync(i,{toast:a})}),window.location.reload()}return H(async()=>{try{r.courseIndex=await f.getAllAsync({toast:a,token:await u.getAccessTokenAsync(i,{toast:a})})}finally{r.isLoading=!1}}),(t,e)=>(n(),d("div",ee,[s("div",te,[oe,r.isLoading?(n(),d("div",ne,[k(P)])):(n(),d("div",se,[(n(!0),d(L,null,V(r.courseIndex,([m,l])=>(n(),d("span",null,[k(G,{class:"p-2 bg-mysticStone text-white rounded flex pl-5 my-3",id:m,name:l.name,description:l.description},null,8,["id","name","description"]),c(u).isAdmin(c(i))?(n(),g(T,{key:0,handler:async()=>await y(m),text:"Delete?",class:"w-20"},null,8,["handler"])):_("",!0)]))),256)),k(K,{handler:h,handlerText:"Create",modelKind:"course"})]))])]))}});export{ue as default};
